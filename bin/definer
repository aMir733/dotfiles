#!/usr/bin/python3
from PyDictionary import PyDictionary
import sys
import json
import os

tmp_file = "/tmp/define"
word = sys.argv[1]
if os.path.exists(tmp_file):
    tmp = open(tmp_file,"r+")
else:
    tmp = open(tmp_file,"w+")
try:
    info = json.loads(tmp.read())
except ValueError: 
    info = {}
if 'word' in info and info['word'] == word:
    if info['number'] >= (len(info['defs']) -1):
        info['number'] = -1
    info['number'] = info['number'] + 1             
    tmp.seek(0)
    json.dump(info,tmp)
    tmp.truncate()
else:
    try:
        defs = PyDictionary().meaning(word, disable_errors=True)['Noun']
    except:
        quit("No Definition Found")
    info = {'word': word, 'number': 0, 'defs': defs}
    tmp.seek(0)
    tmp.write(json.dumps(info))
    tmp.truncate()

with open(tmp_file) as tmp:
    info = json.loads(tmp.read()) 
    print("{}/{} : {}".format(info['number'] + 1, len(info['defs']), info['defs'][info['number']]))
